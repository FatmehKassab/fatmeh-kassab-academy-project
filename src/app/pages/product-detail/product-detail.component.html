<div *ngIf="product" class="product-container" >
    <div class="product-image"><img [src]="product.image" [alt]="product.title" width="400px" ></div>
    <div class="product-details"> 
  <h1>{{ product.title }}</h1>
  <p class="category">({{ product.category }})</p>
 <h1>{{ product.price }}$</h1>
  <div>
  <p class="label">Size</p>
  <div style="display: flex; gap:10px;">
    <div 
      *ngFor="let size of sizes" 
      [ngClass]="{
        'size-box': true,
        'selected': selectedSize === size
      }"
      (click)="selectSize(size)">
      {{ size }}
    </div>
  </div>
</div>

<div>
  <p class="label">Color</p>
      <div style="display: flex; gap:10px;">
        <div *ngFor="let color of colors"
             [style.background]="color.hex.value"
             style="width: 40px; height: 40px; border-radius: 10px; cursor: pointer;">
        </div>
      </div>
    </div>
    
    @if((productQuantity$ | async) ?? 0 > 0){
  <div style="width: fit-content;">
 
<div *ngFor="let item of products; let i = index; trackBy: trackByProductId">
  <p class="label">Quantity</p>
  <app-counter [productId]="item.id" [product]="item"></app-counter>
</div>


    </div>}
 
    <p-accordion  value="0">
    <p-accordion-panel  value="0">
        <p-accordion-header>Description</p-accordion-header>
        <p-accordion-content>
            <p class="m-0">
                 {{ product.description }}
            </p>
        </p-accordion-content>
    </p-accordion-panel>
  </p-accordion>

     <div class="button-container">
     <app-socials
  [iconPath]="isFavorite(product) ? ICONS.filled_heart : ICONS.heart"
  class="social-icon"
  tabindex="0"
  role="button"
  (click)="addToFavorites(product); $event.stopPropagation()"
  (keydown)="onFavoriteKeyDown($event, product)"
  [attr.aria-pressed]="isFavorite(product)"
></app-socials>

           <app-button
            title="Add to cart"
            type="submit"
style="width: 100%;"
(click)="addToCart(product);"
          >
          </app-button>
          <app-button
            title="Checkout"
            type="submit"
            bgColor="var(--secondary)"
style="width: 100%;"
 (click)="navigateTo('/checkout')"
          >
          </app-button>
        </div>
</div>
</div>

<div class="reviews-container">
  <h1 class="reviews-title">Reviews</h1>

  <div class="rating-summary">
    <p class="rating-score">({{ product.rating.rate }})</p>
    <p-rating 
      [ngModel]="product.rating.rate" 
      [readonly]="true" 
      [stars]="5">
    </p-rating>
  </div>

  <p class="rating-based">
    Based on {{ product.rating.count }} reviews, 80% who purchased would recommend this
  </p>

  <p class="rating-snapshot-title">Rating snapshot</p>

  <div class="rating-row"><span>1 (0)</span><p-progressbar [value]="0" /></div>
  <div class="rating-row"><span>2 (2)</span><p-progressbar [value]="20" /></div>
  <div class="rating-row"><span>3 (3)</span><p-progressbar [value]="30" /></div>
  <div class="rating-row"><span>4 (7)</span><p-progressbar [value]="70" /></div>
  <div class="rating-row"><span>5 (2)</span><p-progressbar [value]="20" /></div>
</div>
<app-explore></app-explore>

